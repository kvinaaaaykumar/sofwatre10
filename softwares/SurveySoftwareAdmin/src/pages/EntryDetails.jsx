import { useState, useEffect } from "react";
import axios from "axios";
import Swal from "sweetalert2";
import { MdModeEditOutline } from "react-icons/md";
import { AiOutlineEye } from "react-icons/ai";
import { FiCalendar, FiList } from "react-icons/fi";
import { FaFileExcel } from "react-icons/fa";
import { Plus, Edit3, Loader2 } from "lucide-react";
import { X, User, Calendar, Home, ClipboardList, FileText } from "lucide-react";
import { FaPhoneVolume } from "react-icons/fa6";
import { FaUserTie } from "react-icons/fa6";
import { useUser } from "@clerk/clerk-react";
import AdvanceChart from "./AdvanceChart";
import Cart from "./Cart";
import PostPage from "./PostPage";
import Social from "./Social";
// import PostCategory from "./PostCategory";

export default function EntryDetails() {
  const [form, setForm] = useState({
    name: "",
    age: "",
    address: "",
    purpose: "",
    mobileNumber: "",
    appointmentDate: "",
    createdBy: "",

    // Survey Questions
    q1: "", // рдЙрдореНрд░
    q2: "", // рд╕реНрдерд╛рди
    q3: "", // рд╢рд┐рдХреНрд╖рд╛
    q4: "", // рдкрд░рд┐рд╡рд╛рд░ рдХреА рдЖрд░реНрдерд┐рдХ рд╣рд╛рд▓рдд
    q5: "", // рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд░реБрдЪрд┐
    q6: "", // рдЖрдк рдХреНрдпрд╛ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ?
    q7: "", // рдЕрдкрдиреЗ рдЬреАрд╡рди рд╕реЗ рдХрд┐рддрдирд╛ рдЦреБрд╢ рд╣реИрдВ?
    q8: "", // рдкрд░рд┐рд╡рд╛рд░ рдХреА рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛

    // рд╕рд░рдХрд╛рд░ рдХреА рдпреЛрдЬрдирд╛рдПрдБ
    q9a: "", // рдордирд░реЗрдЧрд╛
    q9b: "", // PM рдХрд┐рд╕рд╛рди - 6000
    q9c: "", // 108 Ambulance
    q9d: "", // 100 рдкреБрд▓рд┐рд╕ рд╕рд╣рд╛рдпрддрд╛
    q9e: "", // рдХрд┐рд╕рд╛рди рдХрд░реНрдЬрд╛ рдорд╛рдлреА
    q9f: "", // рдЫрд╛рддреНрд░реЛрдВ рдХреЛ Laptop
    q9g: "", // рдЙрдЬреНрдЬрд╡рд▓рд╛ рдЧреИрд╕ рдпреЛрдЬрдирд╛
    q9h: "", // рд╕реНрд╡рдЪреНрдЫ рднрд╛рд░рдд рд╢реМрдЪрд╛рд▓рдп

    q10: "", // рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдзрд╛рдпрдХ рдХрд╛рдо рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐
    q11: "", // рдЯрд┐рдХрдЯ рдорд┐рд▓реЗрдЧрд╛ рддреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?
    q12: "", // рд╡рд░реНрддрдорд╛рди рд╕рд░рдХрд╛рд░ рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐
    q13: "", // рд╕рд░рдХрд╛рд░ рдХреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?
    q14: "", // рдЕрдЧрд▓реЗ рдореБрдЦреНрдпрдордВрддреНрд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рд╕реЗ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?

    // рдкрд╛рд░реНрдЯреА рдкрд╕рдВрдж
    q15: "", // рднрд╛рдЬрдкрд╛
    q16: "", // рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА
    q17: "", // рдмрд╕рдкрд╛
    q18: "", // рдХрд╛рдВрдЧреНрд░реЗрд╕
    q19: "", // рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА

    // рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдореНрдореАрджрд╡рд╛рд░
    q20: "", // рднрд╛рдЬрдкрд╛
    q21: "", // рд╕рдкрд╛
    q22: "", // рдмрд╕рдкрд╛
    q23: "", // рдХрд╛рдВрдЧреНрд░реЗрд╕
    q24: "", // рдЕрдиреНрдп рджрд▓
    q25: "", // рдЕрдЧрд▓реЗ рд╡рд┐рдзрд╛рдпрдХ

    q26: "", // рд╡реЛрдЯ рдХрд╛ рдЖрдзрд╛рд░
    q27: "", // рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡рд░реНрдЧ
    q28: "", // рдзрд░реНрдо
    q29: "", // 2017 рд╡рд┐рдзрд╛рди рд╕рднрд╛ рд╡реЛрдЯ
    q30: "", // 2019 рд▓реЛрдХрд╕рднрд╛ рд╡реЛрдЯ
    q31: "", // рдЖрдЬ рд╡реЛрдЯ рджреЗрдВрдЧреЗ рдХрд┐рд╕рдХреЛ
    q32: "", // рдХрд┐рд╕ рдкрд╛рд░реНрдЯреА рдХреА рд╕рд░рдХрд╛рд░ рдмрдиреЗрдЧреА
  });

  // Mapping for survey questions
  const surveyQuestions = [
    { key: "q1", label: "Q1: рдЙрдореНрд░", icon: "ЁЯОВ" },
    { key: "q2", label: "Q2: рд╕реНрдерд╛рди", icon: "ЁЯУН" },
    { key: "q3", label: "Q3: рд╢рд┐рдХреНрд╖рд╛", icon: "ЁЯУШ" },
    { key: "q4", label: "Q4: рдкрд░рд┐рд╡рд╛рд░ рдХреА рдЖрд░реНрдерд┐рдХ рд╣рд╛рд▓рдд", icon: "ЁЯТ░" },
    { key: "q5", label: "Q5: рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд░реБрдЪрд┐", icon: "ЁЯОп" },
    { key: "q6", label: "Q6: рдЖрдк рдХреНрдпрд╛ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ?", icon: "тЪТя╕П" },
    { key: "q7", label: "Q7: рдЕрдкрдиреЗ рдЬреАрд╡рди рд╕реЗ рдХрд┐рддрдирд╛ рдЦреБрд╢ рд╣реИрдВ?", icon: "ЁЯШК" },
    { key: "q8", label: "Q8: рдкрд░рд┐рд╡рд╛рд░ рдХреА рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛", icon: "тЪая╕П" },

    // рд╕рд░рдХрд╛рд░ рдХреА рдпреЛрдЬрдирд╛рдПрдБ
    { key: "q9a", label: "Q9A: рдордирд░реЗрдЧрд╛", icon: "ЁЯПЧя╕П" },
    { key: "q9b", label: "Q9B: PM рдХрд┐рд╕рд╛рди", icon: "ЁЯМ╛" },
    { key: "q9c", label: "Q9C: 108 Ambulance", icon: "ЁЯЪС" },
    { key: "q9d", label: "Q9D: 100 рдкреБрд▓рд┐рд╕ рд╕рд╣рд╛рдпрддрд╛", icon: "ЁЯЪУ" },
    { key: "q9e", label: "Q9E: рдХрд┐рд╕рд╛рди рдХрд░реНрдЬрд╛ рдорд╛рдлреА", icon: "ЁЯТ│" },
    { key: "q9f", label: "Q9F: рдЫрд╛рддреНрд░реЛрдВ рдХреЛ Laptop", icon: "ЁЯТ╗" },
    { key: "q9g", label: "Q9G: рдЙрдЬреНрдЬрд╡рд▓рд╛ рдЧреИрд╕ рдпреЛрдЬрдирд╛", icon: "тЫ╜" },
    { key: "q9h", label: "Q9H: рд╕реНрд╡рдЪреНрдЫ рднрд╛рд░рдд рд╢реМрдЪрд╛рд▓рдп", icon: "ЁЯЪ╜" },

    { key: "q10", label: "Q10: рд╡рд┐рдзрд╛рдпрдХ рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐", icon: "ЁЯПЫя╕П" },
    { key: "q11", label: "Q11: рдЯрд┐рдХрдЯ рдорд┐рд▓реЗрдЧрд╛ рддреЛ?", icon: "ЁЯОл" },
    { key: "q12", label: "Q12: рд╡рд░реНрддрдорд╛рди рд╕рд░рдХрд╛рд░ рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐", icon: "ЁЯПв" },
    { key: "q13", label: "Q13: рд╕рд░рдХрд╛рд░ рдХреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдиреЗрдВрдЧреЗ?", icon: "ЁЯФБ" },
    { key: "q14", label: "Q14: рдЕрдЧрд▓рд╛ рдореБрдЦреНрдпрдордВрддреНрд░реА", icon: "ЁЯСС" },

    // рдкрд╛рд░реНрдЯреА рдкрд╕рдВрдж
    { key: "q15", label: "Q15: рднрд╛рдЬрдкрд╛", icon: "ЁЯЯа" },
    { key: "q16", label: "Q16: рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА", icon: "ЁЯФ┤" },
    { key: "q17", label: "Q17: рдмрд╕рдкрд╛", icon: "ЁЯФ╡" },
    { key: "q18", label: "Q18: рдХрд╛рдВрдЧреНрд░реЗрд╕", icon: "ЁЯЯв" },
    { key: "q19", label: "Q19: рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА", icon: "тЪЦя╕П" },

    // рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдореНрдореАрджрд╡рд╛рд░
    { key: "q20", label: "Q20: рднрд╛рдЬрдкрд╛ рдЙрдореНрдореАрджрд╡рд╛рд░", icon: "ЁЯзСтАНЁЯТ╝" },
    { key: "q21", label: "Q21: рд╕рдкрд╛ рдЙрдореНрдореАрджрд╡рд╛рд░", icon: "ЁЯзСтАНЁЯТ╝" },
    { key: "q22", label: "Q22: рдмрд╕рдкрд╛ рдЙрдореНрдореАрджрд╡рд╛рд░", icon: "ЁЯзСтАНЁЯТ╝" },
    { key: "q23", label: "Q23: рдХрд╛рдВрдЧреНрд░реЗрд╕ рдЙрдореНрдореАрджрд╡рд╛рд░", icon: "ЁЯзСтАНЁЯТ╝" },
    { key: "q24", label: "Q24: рдЕрдиреНрдп рджрд▓ рдЙрдореНрдореАрджрд╡рд╛рд░", icon: "ЁЯзСтАНЁЯТ╝" },
    { key: "q25", label: "Q25: рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдзрд╛рдпрдХ", icon: "ЁЯСе" },

    { key: "q26", label: "Q26: рд╡реЛрдЯ рдХрд╛ рдЖрдзрд╛рд░", icon: "ЁЯЧ│я╕П" },
    { key: "q27", label: "Q27: рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡рд░реНрдЧ", icon: "ЁЯСк" },
    { key: "q28", label: "Q28: рдзрд░реНрдо", icon: "тШкя╕П" },
    { key: "q29", label: "Q29: 2017 рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╡реЛрдЯ", icon: "ЁЯУК" },
    { key: "q30", label: "Q30: 2019 рд▓реЛрдХрд╕рднрд╛ рд╡реЛрдЯ", icon: "ЁЯУК" },
    { key: "q31", label: "Q31: рдЖрдЬ рд╡реЛрдЯ рджреЗрдВрдЧреЗ рдХрд┐рд╕рдХреЛ", icon: "ЁЯЧ│я╕П" },
    { key: "q32", label: "Q32: рдХрд┐рд╕рдХреА рд╕рд░рдХрд╛рд░ рдмрдиреЗрдЧреА?", icon: "ЁЯПЫя╕П" },
  ];

  // Questions Config with Icons
  const surveyQuestionsFull = [
    {
      key: "q1",
      label: "Q1: рдЙрдореНрд░",
      icon: "ЁЯОВ",
      options: ["18 рд╕реЗ 23", "24 рд╕реЗ 35", "36 рд╕реЗ 45", "46 рд╕реЗ 60", "60 рд╕реЗ рдЕрдзрд┐рдХ"],
    },
    {
      key: "q2",
      label: "Q2: рд╕реНрдерд╛рди",
      icon: "ЁЯУН",
      options: ["рдЧрд╛рдВрд╡", "рдХрд╕реНрдмрд╛", "рд╢рд╣рд░"],
    },
    {
      key: "q3",
      label: "Q3: рд╢рд┐рдХреНрд╖рд╛",
      icon: "ЁЯУШ",
      options: [
        "рдЕрд╢рд┐рдХреНрд╖рд┐рдд",
        "рд╢рд┐рдХреНрд╖рд┐рдд",
        "рдкреНрд░рд╛рдЗрдорд░реА",
        "рджрд╕рд╡реАрдВ рдкрд╛рд╕",
        "рдмрд╛рд╣рд░рд╡реАрдВ рдкрд╛рд╕",
        "рд╕реНрдирд╛рддрдХ/рд╕реНрдирд╛рддреНрдХреЛрддреНрддрд░",
      ],
    },
    {
      key: "q4",
      label: "Q4: рдкрд░рд┐рд╡рд╛рд░ рдХреА рдЖрд░реНрдерд┐рдХ рд╣рд╛рд▓рдд",
      icon: "ЁЯТ░",
      options: ["рд╕рдВрднреНрд░рд╛рдВрдд", "рдордзреНрдпрдо рд╡рд░реНрдЧ", "рдЧрд░реАрдм", "рдЕрддрд┐ рдЧрд░реАрдм"],
    },
    {
      key: "q5",
      label: "Q5: рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд░реБрдЪрд┐",
      icon: "ЁЯОп",
      options: [
        "рдмрд╣реБрдд рдЕрдзрд┐рдХ ЁЯШД",
        "рдХрд╛рдлрд╝реА рд╣рдж рддрдХ ЁЯЩВ",
        "рд╕рд╛рдорд╛рдиреНрдп ЁЯШР",
        "рдХрдо ЁЯЩБ",
        "рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ ЁЯШб",
      ],
    },
    {
      key: "q6",
      label: "Q6: рдЖрдк рдХреНрдпрд╛ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "тЪТя╕П",
      options: [
        "рдмреЗрд░реЛрдЬрдЧрд╛рд░",
        "рд╕рд╛рдорд╛рдиреНрдп рдордЬрджреВрд░",
        "рдФрджреНрдпреЛрдЧрд┐рдХ рдордЬрджреВрд░",
        "рд╕рдбрд╝рдХ рд╡рд┐рдХреНрд░реЗрддрд╛",
        "рдЧреГрд╣рдгреА",
        "рд▓рдШреБ рдЙрджреНрдпреЛрдЧ",
        "рдЫрд╛рддреНрд░",
        "рдХрд┐рд╕рд╛рди",
        "рд╕реЗрд╡рд╛ рдирд┐рд╡реГрдд",
        "рдЫреЛрдЯрд╛ рд╡реНрдпрд╡рд╕рд╛рдп",
        "рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдиреМрдХрд░реА",
        "рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░реА",
        "рдмрдбрд╝рд╛ рд╡реНрдпрд╡рд╕рд╛рдп",
        "рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ",
        "рдЕрдиреНрдп",
      ],
    },
    {
      key: "q7",
      label: "Q7: рдЕрдкрдиреЗ рдЬреАрд╡рди рд╕реЗ рдХрд┐рддрдирд╛ рдЦреБрд╢ рд╣реИрдВ?",
      icon: "ЁЯШК",
      options: [
        "рдмрд╣реБрдд рдЦреБрд╢ ЁЯШД",
        "рдЦреБрд╢ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЙрджрд╛рд╕ ЁЯЩБ",
        "рдмрд╣реБрдд рдЙрджрд╛рд╕ ЁЯШв",
      ],
    },
    {
      key: "q8",
      label: "Q8: рдкрд░рд┐рд╡рд╛рд░ рдХреА рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛",
      icon: "тЪая╕П",
      options: [
        "рджреЛ рд╕рдордп рдХрд╛ рднреЛрдЬрди",
        "рдмреЗрд░реЛрдЬрдЧрд╛рд░реА",
        "рдХрд╛рдиреВрди рд╡реНрдпрд╡рд╕реНрдерд╛",
        "рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░",
        "рдорд╣рдВрдЧрд╛рдИ",
        "рд╕рд╛рдордВрдкреНрд░рджрд╛рдпрд┐рдХ рддрдирд╛рд╡",
        "рд╕рд░рдХрд╛рд░реА рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реБрд╡рд┐рдзрд╛рдПрдВ",
        "рдкреАрдиреЗ рдХрд╛ рдкрд╛рдиреА",
        "рд╢рд┐рдХреНрд╖рд╛ рд╡реНрдпрд╡рд╕реНрдерд╛",
        "рд╕рдбрд╝рдХреЗрдВ",
        "рд╕рдорд╛рдЬ рдореЗрдВ рд╕рдореНрдорд╛рди",
        "рд╡рд┐рдХрд╛рд╕ рдХреА рдХрдореА",
      ],
    },

    // рд╕рд░рдХрд╛рд░ рдХреА рдпреЛрдЬрдирд╛рдПрдБ
    {
      key: "q9a",
      label: "Q9A: рдордирд░реЗрдЧрд╛",
      icon: "ЁЯПЧя╕П",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9b",
      label: "Q9B: PM рдХрд┐рд╕рд╛рди - 6000 рд░реВрдкрдП рд╕рд╛рд▓",
      icon: "ЁЯМ╛",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9c",
      label: "Q9C: 108 Ambulance",
      icon: "ЁЯЪС",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9d",
      label: "Q9D: 100 рдкреБрд▓рд┐рд╕ рд╕рд╣рд╛рдпрддрд╛",
      icon: "ЁЯЪУ",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9e",
      label: "Q9E: рдХрд┐рд╕рд╛рди рдХрд░реНрдЬрд╛ рдорд╛рдлреА",
      icon: "ЁЯТ│",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9f",
      label: "Q9F: рдЫрд╛рддреНрд░реЛрдВ рдХреЛ Laptop",
      icon: "ЁЯТ╗",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9g",
      label: "Q9G: рдЙрдЬреНрдЬрд╡рд▓рд╛ рд░рд╕рд╛рдИ рдЧреИрд╕ рдпреЛрдЬрдирд╛",
      icon: "тЫ╜",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },
    {
      key: "q9h",
      label: "Q9H: рд╕реНрд╡рдЪреНрдЫ рднрд╛рд░рдд рдореЗрдВ рд╢реМрдЪрд╛рд▓рдп рдХрд╛ рдирд┐рд░реНрдорд╛рдг",
      icon: "ЁЯЪ╜",
      options: ["рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ", "рд╕реБрдирд╛ рд╣реИ", "рд▓рд╛рдн рдорд┐рд▓рд╛ рд╣реИ"],
    },

    {
      key: "q10",
      label: "Q10: рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдзрд╛рдпрдХ рдХреЗ рдХрд╛рдо рдХрд╛рдЬ рд╕реЗ рдХрд┐рддрдирд╛ рд╕рдВрддреБрд╖реНрдЯ рд╣реИ?",
      icon: "ЁЯПЫя╕П",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q11",
      label: "Q11: рдЕрдЧрд░ рдЪреБрдирд╛рд╡ рдореЗрдВ рдЯрд┐рдХрдЯ рдорд┐рд▓реЗрдЧрд╛ рддреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?",
      icon: "ЁЯОл",
      options: ["рд╣рд╛рдВ ЁЯШД", "рд╢рд╛рдпрдж/рдкрддрд╛ рдирд╣реАрдВ ЁЯШР", "рдирд╣реАрдВ ЁЯШб"],
    },
    {
      key: "q12",
      label: "Q12: рд╡рд░реНрддрдорд╛рди рд╕рд░рдХрд╛рд░ рдХреЗ рдХрд╛рдо рдХрд╛рдЬ рд╕реЗ рдХрд┐рддрдирд╛ рд╕рдВрддреБрд╖реНрдЯ рд╣реИ?",
      icon: "ЁЯПв",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q13",
      label:
        "Q13: рдХреНрдпрд╛ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЪреБрдирд╛рд╡ рдореЗрдВ рд╡рд░реНрддрдорд╛рди рд╕рд░рдХрд╛рд░ рдХреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?",
      icon: "ЁЯФБ",
      options: ["рд╣рд╛рдВ ЁЯШД", "рд╢рд╛рдпрдж/рдкрддрд╛ рдирд╣реАрдВ ЁЯШР", "рдирд╣реАрдВ ЁЯШб"],
    },
    {
      key: "q14",
      label:
        "Q14: рдЖрдк рдХрд┐рд╕ рдиреЗрддрд╛ рдХреЛ рдкреНрд░рджреЗрд╢ рдХрд╛ рдЕрдЧрд▓реЗ рдореБрдЦреНрдпрдордВрддреНрд░реА рдХреЗ рд░реБрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯСС",
      options: [
        "рдпреЛрдЧреА рдЖрджрд┐рддреНрдпрдирд╛рде рдЬреА",
        "рднрд╛рдЬрдкрд╛ рд╕реЗ рдЕрдиреНрдп",
        "рдЕрдЦрд┐рд▓реЗрд╢ рдпрд╛рджрд╡ рдЬреА",
        "рд╕рдкрд╛ рд╕реЗ рдЕрдиреНрдп",
        "рдорд╛рдпрд╛рд╡рддреА рдЬреА",
        "рдмрд╕рдкрд╛ рд╕реЗ рдЕрдиреНрдп",
        "рдЕрдЬрдп рдХреБрдорд╛рд░ рд▓рд▓реНрд▓реВ",
        "рдХрд╛рдВрдЧреНрд░реЗрд╕ рд╕реЗ рдЕрдиреНрдп",
        "рдЬрдпрдВрдд рдЪреМрдзрд░реА рдЬреА",
        "рдХреЛрдИ рдФрд░",
      ],
    },

    // рдкрд╛рд░реНрдЯреА рдкрд╕рдВрдж
    {
      key: "q15",
      label: "Q15: рдЖрдк рднрд╛рдЬрдкрд╛ рдХреЛ рдХрд┐рддрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "ЁЯЯа",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q16",
      label: "Q16: рдЖрдк рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА рдХреЛ рдХрд┐рддрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "ЁЯФ┤",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q17",
      label: "Q17: рдЖрдк рдмрд╕рдкрд╛ рдХреЛ рдХрд┐рддрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "ЁЯФ╡",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q18",
      label: "Q18: рдЖрдк рдХрд╛рдВрдЧреНрд░реЗрд╕ рдХреЛ рдХрд┐рддрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "ЁЯЯв",
      options: [
        "рдкреВрд░реНрдгрддрдГ рд╕рдВрддреБрд╖реНрдЯ ЁЯШД",
        "рд╕рдВрддреБрд╖реНрдЯ ЁЯЩВ",
        "рдареАрдХ-рдард╛рдХ ЁЯШР",
        "рдЕрд╕рдВрддреБрд╖реНрдЯ ЁЯЩБ",
        "рдкреВрд░реНрдгрддрдГ рдЕрд╕рдВрддреБрд╖реН ЁЯШб",
      ],
    },
    {
      key: "q19",
      label: "Q19: рдЖрдк рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА рдХреЛ рдХрд┐рддрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?",
      icon: "тЪЦя╕П",
      options: ["рд╣рд╛рдВ ЁЯШД", "рд╢рд╛рдпрдж/рдкрддрд╛ рдирд╣реАрдВ ЁЯШР", "рдирд╣реАрдВ ЁЯШб"],
    },

    // рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдореНрдореАрджрд╡рд╛рд░
    {
      key: "q20",
      label:
        "Q20: рднрд╛рдЬрдкрд╛ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдореЗрдВ рд╕реЗ рдЖрдк рдХрд┐рд╕рдХреЛ рдЙрдореНрдореАрджрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯзСтАНЁЯТ╝",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },
    {
      key: "q21",
      label:
        "Q21: рд╕рдкрд╛ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдореЗрдВ рд╕реЗ рдЖрдк рдХрд┐рд╕рдХреЛ рдЙрдореНрдореАрджрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯзСтАНЁЯТ╝",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },
    {
      key: "q22",
      label:
        "Q22: рдмрд╕рдкрд╛ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдореЗрдВ рд╕реЗ рдЖрдк рдХрд┐рд╕рдХреЛ рдЙрдореНрдореАрджрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯзСтАНЁЯТ╝",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },
    {
      key: "q23",
      label:
        "Q23: рдХрд╛рдВрдЧреНрд░реЗрд╕ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдореЗрдВ рд╕реЗ рдЖрдк рдХрд┐рд╕рдХреЛ рдЙрдореНрдореАрджрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯзСтАНЁЯТ╝",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },
    {
      key: "q24",
      label:
        "Q24: рдЕрдиреНрдп рджрд▓реЛ рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рдирд╛рдореЛрдВ рдореЗрдВ рд╕реЗ рдЖрдк рдХрд┐рд╕рдХреЛ рдЙрдореНрдореАрджрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯзСтАНЁЯТ╝",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },
    {
      key: "q25",
      label:
        "Q25: рдЖрдк рдХрд┐рд╕ рд╕реНрдерд╛рдиреАрдп рдиреЗрддрд╛ рдХреЛ рдХреНрд╖реЗрддреНрд░ рдХреЗ рдЕрдЧрд▓реЗ рд╡рд┐рдзрд╛рдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?",
      icon: "ЁЯСе",
      options: ["рдЕрдиреНрдп / рдирд╣реАрдВ рдХрд╣ рд╕рдХрддреЗ"],
    },

    {
      key: "q26",
      label: "Q26: рдЖрдк рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЪреБрдирд╛рд╡ рдореЗрдВ рдХрд┐рд╕ рдЖрдзрд╛рд░ рдкрд░ рдЕрдкрдиреЗ рд╡реЛрдЯ рдХрд╛ рдлреИрд╕рд▓рд╛ рд▓реЗрдВрдЧреЗрдВ?",
      icon: "ЁЯЧ│я╕П",
      options: [
        "рдкрд╛рд░реНрдЯреА",
        "рдореБрдЦреНрдпрдордВрддреНрд░реА рдЙрдореНрдореАрджрд╡рд╛рд░",
        "рд╡рд┐рдзрд╛рдпрдХ рдЙрдореНрдореАрджрд╡рд╛рд░",
        "рдЕрдкрдиреЗ рд╕рдорд╛рдЬ рдХреЗ рд╕рд╛рде",
        "рдХрд╣ рдирд╣реАрдВ рд╕рдХрддреЗ",
      ],
    },
    {
      key: "q27",
      label: "Q27: рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡рд░реНрдЧ",
      icon: "ЁЯСк",
      options: [
        "рд╕рд╡рд░реНрдг",
        "рдкрд┐рдЫрдбрд╝реА рдЬрд╛рддрд┐рдпрд╛рдВ",
        "рдЕрдиреБрд╕реВрдЪрд┐рдд рдЬрд╛рддрд┐",
        "рдЕрдЧрдбрд╝реЗ рдореБрд╕реНрд▓рд┐рдо",
        "рдкрд┐рдЫрдбрд╝реЗ рдореБрд╕реНрд▓рд┐рдо",
        "рдЕрдиреНрдп",
      ],
    },
    {
      key: "q28",
      label: "Q28: рдзрд░реНрдо",
      icon: "тШкя╕П",
      options: ["рд╣рд┐рдиреНрджреВ", "рдореБрд╕реНрд▓рд┐рдо", "рд╕рд┐рдЦ", "рдЕрдиреНрдп"],
    },
    {
      key: "q29",
      label: "Q29: 2017 рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╡реЛрдЯ",
      icon: "ЁЯУК",
      options: [
        "рднрд╛рдЬрдкрд╛ + рд╕рдорд░реНрдердХ рджрд▓",
        "рд╕рдкрд╛-рдХрд╛рдВрдЧреНрд░реЗрд╕",
        "рдмрд╕рдкрд╛",
        "рд░рд╛рд▓реЛрдж",
        "рдЕрдиреНрдп",
        "рд╡реЛрдЯ рдирд╣реАрдВ рдерд╛",
        "рд╡реЛрдЯ рдирд╣реАрдВ рджрд┐рдпрд╛",
      ],
    },
    {
      key: "q30",
      label: "Q30: 2019 рд▓реЛрдХрд╕рднрд╛ рд╡реЛрдЯ",
      icon: "ЁЯУК",
      options: [
        "рднрд╛рдЬрдкрд╛ + рд╕рдорд░реНрдердХ рджрд▓",
        "рд╕рдкрд╛-рдмрд╕рдкрд╛",
        "рдХрд╛рдВрдЧреНрд░реЗрд╕",
        "PSPL",
        "рдЕрдиреНрдп",
        "рд╡реЛрдЯ рдирд╣реАрдВ рдерд╛",
        "рд╡реЛрдЯ рдирд╣реАрдВ рджрд┐рдпрд╛",
      ],
    },
    {
      key: "q31",
      label: "Q31: рдЖрдЬ рд╡реЛрдЯ рджреЗрдВрдЧреЗ рдХрд┐рд╕рдХреЛ",
      icon: "ЁЯЧ│я╕П",
      options: [
        "рднрд╛рдЬрдкрд╛ + рд╕рдорд░реНрдердХ рджрд▓",
        "рд╕рдкрд╛",
        "рдмрд╕рдкрд╛",
        "рдХрд╛рдВрдЧреНрд░реЗрд╕",
        "PSPL",
        "рдЕрдиреНрдп",
        "рддрдп рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ",
      ],
    },
    {
      key: "q32",
      label: "Q32: рдХрд┐рд╕рдХреА рд╕рд░рдХрд╛рд░ рдмрдиреЗрдЧреА?",
      icon: "ЁЯПЫя╕П",
      options: [
        "рднрд╛рдЬрдкрд╛ + рд╕рдорд░реНрдердХ рджрд▓",
        "рд╕рдкрд╛",
        "рдмрд╕рдкрд╛",
        "рдХрд╛рдВрдЧреНрд░реЗрд╕",
        "рдЕрдиреНрдп",
        "рдкрддрд╛ рдирд╣реАрдВ",
      ],
    },
  ];

  const API_URL = import.meta.env.VITE_API_URL;
  const [entries, setEntries] = useState([]);
  const [stats, setStats] = useState({ todayCount: 0, totalCount: 0 });
  const [editId, setEditId] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  const { user } = useUser();

  // Loading states
  const [loadingEntries, setLoadingEntries] = useState(false);
  const [submitting, setSubmitting] = useState(false);
  const [downloading, setDownloading] = useState(false);

  // New state for viewing details
  const [viewModalOpen, setViewModalOpen] = useState(false);
  const [selectedEntry, setSelectedEntry] = useState(null);

  const fetchEntries = async () => {
    try {
      setLoadingEntries(true);
      const res = await axios.get(`${API_URL}/api/entries`);
      setEntries(res.data);
      const statRes = await axios.get(`${API_URL}/api/entries/stats`);
      setStats(statRes.data);
    } catch (error) {
      Swal.fire("Error", "Failed to fetch entries", "error");
    } finally {
      setLoadingEntries(false);
    }
  };

  const submitForm = async () => {
    try {
      setSubmitting(true);
      if (editId) {
        await axios.put(`${API_URL}/api/entries/${editId}`, form);
        Swal.fire({
          icon: "success",
          title: "Updated!",
          text: "The entry was updated successfully.",
          timer: 1500,
          showConfirmButton: false,
        });
        setEditId(null);
      } else {
        await axios.post(`${API_URL}/api/entries`, form);
        Swal.fire({
          icon: "success",
          title: "ЁЯОЙ Added!",
          text: "New entry has been added successfully.",
          timer: 1500,
          showConfirmButton: false,
        });
      }
      setForm({
        name: "",
        age: "",
        address: "",
        purpose: "",
        mobileNumber: "",
        appointmentDate: "",
        createdBy: "",

        // Survey Questions
        q1: "", // рдЙрдореНрд░
        q2: "", // рд╕реНрдерд╛рди
        q3: "", // рд╢рд┐рдХреНрд╖рд╛
        q4: "", // рдкрд░рд┐рд╡рд╛рд░ рдХреА рдЖрд░реНрдерд┐рдХ рд╣рд╛рд▓рдд
        q5: "", // рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд░реБрдЪрд┐
        q6: "", // рдЖрдк рдХреНрдпрд╛ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ?
        q7: "", // рдЕрдкрдиреЗ рдЬреАрд╡рди рд╕реЗ рдХрд┐рддрдирд╛ рдЦреБрд╢ рд╣реИрдВ?
        q8: "", // рдкрд░рд┐рд╡рд╛рд░ рдХреА рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛

        // рд╕рд░рдХрд╛рд░ рдХреА рдпреЛрдЬрдирд╛рдПрдБ
        q9a: "", // рдордирд░реЗрдЧрд╛
        q9b: "", // PM рдХрд┐рд╕рд╛рди - 6000
        q9c: "", // 108 Ambulance
        q9d: "", // 100 рдкреБрд▓рд┐рд╕ рд╕рд╣рд╛рдпрддрд╛
        q9e: "", // рдХрд┐рд╕рд╛рди рдХрд░реНрдЬрд╛ рдорд╛рдлреА
        q9f: "", // рдЫрд╛рддреНрд░реЛрдВ рдХреЛ Laptop
        q9g: "", // рдЙрдЬреНрдЬрд╡рд▓рд╛ рдЧреИрд╕ рдпреЛрдЬрдирд╛
        q9h: "", // рд╕реНрд╡рдЪреНрдЫ рднрд╛рд░рдд рд╢реМрдЪрд╛рд▓рдп

        q10: "", // рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдзрд╛рдпрдХ рдХрд╛рдо рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐
        q11: "", // рдЯрд┐рдХрдЯ рдорд┐рд▓реЗрдЧрд╛ рддреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?
        q12: "", // рд╡рд░реНрддрдорд╛рди рд╕рд░рдХрд╛рд░ рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐
        q13: "", // рд╕рд░рдХрд╛рд░ рдХреЛ рджреЛрдмрд╛рд░рд╛ рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?
        q14: "", // рдЕрдЧрд▓реЗ рдореБрдЦреНрдпрдордВрддреНрд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рд╕реЗ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?

        // рдкрд╛рд░реНрдЯреА рдкрд╕рдВрдж
        q15: "", // рднрд╛рдЬрдкрд╛
        q16: "", // рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА
        q17: "", // рдмрд╕рдкрд╛
        q18: "", // рдХрд╛рдВрдЧреНрд░реЗрд╕
        q19: "", // рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╕рдорд╛рдЬрд╡рд╛рджреА рдкрд╛рд░реНрдЯреА

        // рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдореНрдореАрджрд╡рд╛рд░
        q20: "", // рднрд╛рдЬрдкрд╛
        q21: "", // рд╕рдкрд╛
        q22: "", // рдмрд╕рдкрд╛
        q23: "", // рдХрд╛рдВрдЧреНрд░реЗрд╕
        q24: "", // рдЕрдиреНрдп рджрд▓
        q25: "", // рдЕрдЧрд▓реЗ рд╡рд┐рдзрд╛рдпрдХ

        q26: "", // рд╡реЛрдЯ рдХрд╛ рдЖрдзрд╛рд░
        q27: "", // рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡рд░реНрдЧ
        q28: "", // рдзрд░реНрдо
        q29: "", // 2017 рд╡рд┐рдзрд╛рди рд╕рднрд╛ рд╡реЛрдЯ
        q30: "", // 2019 рд▓реЛрдХрд╕рднрд╛ рд╡реЛрдЯ
        q31: "", // рдЖрдЬ рд╡реЛрдЯ рджреЗрдВрдЧреЗ рдХрд┐рд╕рдХреЛ
        q32: "", // рдХрд┐рд╕ рдкрд╛рд░реНрдЯреА рдХреА рд╕рд░рдХрд╛рд░ рдмрдиреЗрдЧреА
      });

      setIsModalOpen(false);
      fetchEntries();
    } catch (error) {
      Swal.fire("Error", "Something went wrong!", "error");
    } finally {
      setSubmitting(false);
    }
  };

  const startEdit = (entry) => {
    setForm({
      name: entry.name,
      age: entry.age,
      address: entry.address,
      purpose: entry.purpose,
      mobileNumber: entry.mobileNumber,
      appointmentDate: entry.appointmentDate,
      createdBy: entry.createdBy,

      // Survey Questions
      q1: entry.q1,
      q2: entry.q2,
      q3: entry.q3,
      q4: entry.q4,
      q5: entry.q5,
      q6: entry.q6,
      q7: entry.q7,
      q8: entry.q8,

      // рд╕рд░рдХрд╛рд░ рдХреА рдпреЛрдЬрдирд╛рдПрдБ
      q9a: entry.q9a,
      q9b: entry.q9b,
      q9c: entry.q9c,
      q9d: entry.q9d,
      q9e: entry.q9e,
      q9f: entry.q9f,
      q9g: entry.q9g,
      q9h: entry.q9h,

      q10: entry.q10,
      q11: entry.q11,
      q12: entry.q12,
      q13: entry.q13,
      q14: entry.q14,

      // рдкрд╛рд░реНрдЯреА рдкрд╕рдВрдж
      q15: entry.q15,
      q16: entry.q16,
      q17: entry.q17,
      q18: entry.q18,
      q19: entry.q19,

      // рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдореНрдореАрджрд╡рд╛рд░
      q20: entry.q20,
      q21: entry.q21,
      q22: entry.q22,
      q23: entry.q23,
      q24: entry.q24,
      q25: entry.q25,

      q26: entry.q26,
      q27: entry.q27,
      q28: entry.q28,
      q29: entry.q29,
      q30: entry.q30,
      q31: entry.q31,
      q32: entry.q32,
    });

    setEditId(entry._id);
    setIsModalOpen(true);
  };

  const viewEntry = (entry) => {
    setSelectedEntry(entry);
    setViewModalOpen(true);
  };

  const downloadExcel = async () => {
    try {
      setDownloading(true);
      window.location.href = `${API_URL}/api/entries/download`;
      setTimeout(() => setDownloading(false), 2000); // reset after a short delay
    } catch (err) {
      setDownloading(false);
    }
  };

  useEffect(() => {
    fetchEntries();
  }, []);

  return (
    <div className="p-6 max-w-5xl mx-auto">
      {/* Heading */}
      <div className="text-center mb-5">
        <h2 className="text-slate-700 text-3xl sm:text-4xl font-bold">
          Entry Details
        </h2>
      </div>

      {/* View Modal */}
      {viewModalOpen && selectedEntry && (
        <div className="fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50">
          <div className="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl w-full max-w-3xl relative animate-fadeIn border border-gray-200 flex flex-col max-h-[90vh]">
            {/* Close Button */}
            <button
              onClick={() => setViewModalOpen(false)}
              className="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition"
            >
              <X size={22} />
            </button>

            {/* Title */}
            <h2 className="text-3xl font-extrabold text-gray-800 py-6 text-center border-b">
              ЁЯУЛ Entry Details
            </h2>

            {/* Scrollable Content */}
            <div className="flex-1 overflow-y-auto p-6 space-y-4">
              {/* Details */}
              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-blue-500">ЁЯСд</span>
                <p>
                  <strong>Name:</strong> {selectedEntry.name}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-purple-500">ЁЯОВ</span>
                <p>
                  <strong>Age:</strong> {selectedEntry.age}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-orange-500">ЁЯУ▒</span>
                <p>
                  <strong>Mobile:</strong> {selectedEntry.mobileNumber}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-green-500">ЁЯУН</span>
                <p>
                  <strong>Address:</strong> {selectedEntry.address}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-orange-500">ЁЯОп</span>
                <p>
                  <strong>Purpose:</strong> {selectedEntry.purpose}
                </p>
              </div>

              {/* Loop Survey Questions */}
              {surveyQuestions.map((q, idx) => (
                <div
                  key={idx}
                  className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3"
                >
                  <span className="text-indigo-500">{q.icon}</span>
                  <p>
                    <strong>{q.label}:</strong> {selectedEntry[q.key]}
                  </p>
                </div>
              ))}

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-pink-500">ЁЯУЕ</span>
                <p>
                  <strong>Booking Date:</strong> {selectedEntry.appointmentDate}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-gray-600">тП│</span>
                <p>
                  <strong>Created:</strong> {selectedEntry.createDate}
                </p>
              </div>

              <div className="p-3 bg-gray-50 rounded-xl shadow-sm flex items-center gap-3">
                <span className="text-orange-500">тЬНя╕П</span>
                <p>
                  <strong>Created By:</strong> {selectedEntry.createdBy}
                </p>
              </div>
            </div>

            {/* Footer */}
            <div className="py-4 flex justify-center border-t">
              <button
                onClick={() => setViewModalOpen(false)}
                className="px-6 py-2 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium shadow-md hover:scale-105 transition-transform"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      )}


      {/* Table */}
      <div className="flex items-center p-4 bg-white shadow-md rounded-2xl border border-gray-200">
        {loadingEntries ? (
          <div className="w-full text-center text-gray-500">
            Loading entries...
          </div>
        ) : (
          <table className="min-w-full text-left text-sm border border-gray-200">
            <thead className="bg-gray-100 text-gray-700">
              <tr>
                <th className="py-3 px-4 border">S.No</th>
                <th className="py-3 px-4 border">Name</th>
                {/* <th className="py-3 px-4 border">Age</th> */}
                {/* <th className="py-3 px-4 border">Address</th> */}
                {/* <th className="py-3 px-4 border">Purpose</th> */}
                {/* <th className="py-3 px-4 border">Appointment Date</th> */}
                {/* <th className="py-3 px-4 border">Create Date</th> */}
                <th className="py-3 px-4 border">Action</th>
              </tr>
            </thead>
            <tbody>
              {entries.map((e, i) => (
                <tr key={e._id}>
                  <td className="py-3 px-4 border">{i + 1}</td>
                  <td className="py-3 px-4 border">{e.name}</td>
                  {/* <td className="py-3 px-4 border">{e.age}</td> */}
                  {/* <td className="py-3 px-4 border">{e.address}</td> */}
                  {/* <td className="py-3 px-4 border">{e.purpose}</td> */}
                  {/* <td className="py-3 px-4 border">{e.appointmentDate}</td> */}
                  {/* <td className="py-3 px-4 border">{e.createDate}</td> */}
                  <td className="py-3 px-4 border">
                    <div className="flex gap-2">
                      <button
                        onClick={() => viewEntry(e)}
                        className="p-2 bg-green-100 hover:bg-green-600 text-green-800 hover:text-white rounded-full"
                      >
                        <AiOutlineEye />
                      </button>
                      <button
                        onClick={() => startEdit(e)}
                        className="p-2 bg-blue-100 hover:bg-blue-600 text-blue-800 hover:text-white rounded-full"
                      >
                        <MdModeEditOutline />
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
              {entries.length === 0 && (
                <tr>
                  <td colSpan="8" className="text-center py-4 text-gray-500">
                    No entries found
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        )}
      </div>

      {/* Submit Button Loader */}
      {isModalOpen && (
        <div className="fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50">
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl relative animate-fadeIn flex flex-col max-h-[90vh]">
            {/* Close Button */}
            <button
              onClick={() => {
                setIsModalOpen(false);
                setEditId(null);
                setForm({
                  // reset fields...
                  name: "",
                  age: "",
                  address: "",
                  purpose: "",
                  mobileNumber: "",
                  createdBy: "",
                  appointmentDate: "",
                  q1: "",
                  q2: "",
                  q3: "",
                  q4: "",
                  q5: "",
                  q6: "",
                  q7: "",
                  q8: "",
                  q9a: "",
                  q9b: "",
                  q9c: "",
                  q9d: "",
                  q9e: "",
                  q9f: "",
                  q9g: "",
                  q9h: "",
                  q10: "",
                  q11: "",
                  q12: "",
                  q13: "",
                  q14: "",
                  q15: "",
                  q16: "",
                  q17: "",
                  q18: "",
                  q19: "",
                  q20: "",
                  q21: "",
                  q22: "",
                  q23: "",
                  q24: "",
                  q25: "",
                  q26: "",
                  q27: "",
                  q28: "",
                  q29: "",
                  q30: "",
                  q31: "",
                  q32: "",
                });
              }}
              className="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition"
            >
              <X size={22} />
            </button>

            {/* Title */}
            <h2 className="text-2xl font-bold text-gray-800 py-5 text-center border-b">
              {editId ? "тЬПя╕П Edit Entry" : "ЁЯУМ Create New Entry"}
            </h2>

            {/* Scrollable Form Content */}
            <div className="flex-1 overflow-y-auto p-6">
              <div className="grid grid-cols-2 gap-4">
                {/* Name */}
                <div>
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Name
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <User size={18} className="text-blue-500 mr-2" />
                    <input
                      className="w-full p-2 focus:outline-none"
                      placeholder="Enter name"
                      value={form.name}
                      onChange={(e) =>
                        setForm({ ...form, name: e.target.value })
                      }
                    />
                  </div>
                </div>

                {/* Gender */}
                <div>
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Gender
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <ClipboardList size={18} className="text-purple-500 mr-2" />
                    <select
                      className="w-full p-2 focus:outline-none"
                      value={form.age}
                      onChange={(e) =>
                        setForm({ ...form, age: e.target.value })
                      }
                    >
                      <option value="">Select Gender</option>
                      <option>Male</option>
                      <option>Female</option>
                      <option>Other</option>
                    </select>
                  </div>
                </div>

                {/* Mobile Number */}
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Mobile Number
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <FaPhoneVolume size={18} className="text-red-500 mr-2" />
                    <input
                      type="number"
                      className="w-full p-2 focus:outline-none"
                      placeholder="Enter Mobile Number"
                      value={form.mobileNumber}
                      onChange={(e) =>
                        setForm({ ...form, mobileNumber: e.target.value })
                      }
                    />
                  </div>
                </div>

                {/* Address */}
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Address
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <Home size={18} className="text-green-500 mr-2" />
                    <input
                      className="w-full p-2 focus:outline-none"
                      placeholder="Enter address"
                      value={form.address}
                      onChange={(e) =>
                        setForm({ ...form, address: e.target.value })
                      }
                    />
                  </div>
                </div>

                {/* Purpose */}
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Purpose
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <FileText size={18} className="text-orange-500 mr-2" />
                    <select
                      className="w-full p-2 focus:outline-none"
                      value={form.purpose}
                      onChange={(e) =>
                        setForm({ ...form, purpose: e.target.value })
                      }
                    >
                      <option value="">Select Purpose</option>
                      {/* your options... */}
                    </select>
                  </div>
                </div>

                {surveyQuestionsFull.map((q) => (
                  <div key={q.key} className="col-span-2">
                    <label className="block text-sm font-medium text-gray-600 mb-1">
                      {q.label}
                    </label>
                    <div className="flex items-center border rounded-lg px-3">
                      <span className="mr-2 text-lg">{q.icon}</span>
                      <select
                        className="w-full p-2 focus:outline-none"
                        value={form[q.key] || ""}
                        onChange={(e) =>
                          setForm({ ...form, [q.key]: e.target.value })
                        }
                      >
                        <option value="">Select</option>
                        {q.options.map((opt, i) => (
                          <option key={i} value={opt}>
                            {opt}
                          </option>
                        ))}
                      </select>
                    </div>
                  </div>
                ))}

                {/* Appointment Date */}
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Booking Date
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <Calendar size={18} className="text-pink-500 mr-2" />
                    <input
                      type="date"
                      className="w-full p-2 focus:outline-none"
                      value={form.appointmentDate}
                      onChange={(e) =>
                        setForm({ ...form, appointmentDate: e.target.value })
                      }
                    />
                  </div>
                </div>

                {/* Created By */}
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-600 mb-1">
                    Created By
                  </label>
                  <div className="flex items-center border rounded-lg px-3">
                    <FaUserTie size={18} className="text-orange-500 mr-2" />
                    <select
                      className="w-full p-2 focus:outline-none"
                      value={form.createdBy}
                      onChange={(e) =>
                        setForm({ ...form, createdBy: e.target.value })
                      }
                    >
                      <option value="">Select Created By</option>
                      <option>
                        {user.firstName} {user.lastName} (
                        {user.primaryEmailAddress?.emailAddress})
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            {/* Footer Submit */}
            <div className="p-4 border-t flex justify-center">
              <button
                onClick={submitForm}
                disabled={submitting}
                className={`flex items-center justify-center gap-2 px-6 py-2.5 rounded-full 
            text-white font-medium shadow-md transition transform ${
              submitting
                ? "bg-gray-400 cursor-not-allowed"
                : "bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 hover:scale-105 active:scale-95"
            }`}
              >
                {submitting ? (
                  <>
                    <Loader2 className="animate-spin" size={18} /> Processing...
                  </>
                ) : editId ? (
                  "тЬЕ Update Entry"
                ) : (
                  "ЁЯЪА Submit Entry"
                )}
              </button>
            </div>
          </div>
        </div>
      )}

    </div>
  );
}
